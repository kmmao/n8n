# n8n å¿«é€Ÿå¼€å§‹æŒ‡å—

## å‰ç½®è¦æ±‚

### å¿…éœ€è½¯ä»¶

1. **Node.js**
   - ç‰ˆæœ¬: >= 22.16
   - ä¸‹è½½: https://nodejs.org/

2. **pnpm**
   - ç‰ˆæœ¬: >= 10.18.3
   - æ¨èä½¿ç”¨ corepack å®‰è£…ï¼ˆè§ä¸‹æ–‡ï¼‰

3. **corepack**ï¼ˆNode.js åŒ…ç®¡ç†å™¨ç®¡ç†å·¥å…·ï¼‰
   ```bash
   # å¯ç”¨ corepack
   corepack enable

   # æ¿€æ´»æ­£ç¡®çš„ pnpm ç‰ˆæœ¬
   corepack prepare --activate
   ```

   **æ³¨æ„äº‹é¡¹**:
   - å¦‚æœé€šè¿‡ Homebrew å®‰è£… Node.jsï¼Œéœ€è¦å•ç‹¬å®‰è£… corepack:
     ```bash
     brew install corepack
     ```
   - Windows ç”¨æˆ·éœ€è¦ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œç»ˆç«¯æ‰§è¡Œä¸Šè¿°å‘½ä»¤

4. **æ„å»ºå·¥å…·**

   **Debian/Ubuntu:**
   ```bash
   apt-get install -y build-essential python
   ```

   **CentOS:**
   ```bash
   yum install gcc gcc-c++ make
   ```

   **macOS:**
   æ— éœ€é¢å¤–å®‰è£…

   **Windows:**
   ```bash
   npm add -g windows-build-tools
   ```

## å®‰è£…æ­¥éª¤

### 1. Fork å’Œ Clone ä»“åº“

```bash
# 1. åœ¨ GitHub ä¸Š Fork n8n ä»“åº“
# è®¿é—®: https://github.com/n8n-io/n8n å¹¶ç‚¹å‡» Fork

# 2. Clone ä½ çš„ Fork
git clone https://github.com/<ä½ çš„ç”¨æˆ·å>/n8n.git

# 3. è¿›å…¥é¡¹ç›®ç›®å½•
cd n8n

# 4. æ·»åŠ ä¸Šæ¸¸ä»“åº“
git remote add upstream https://github.com/n8n-io/n8n.git
```

### 2. å®‰è£…ä¾èµ–

```bash
# å®‰è£…æ‰€æœ‰åŒ…çš„ä¾èµ–å¹¶é“¾æ¥å®ƒä»¬
pnpm install
```

è¿™ä¸ªå‘½ä»¤ä¼šï¼š
- å®‰è£…æ‰€æœ‰ monorepo ä¸­çš„ä¾èµ–
- è‡ªåŠ¨å»ºç«‹åŒ…ä¹‹é—´çš„è½¯é“¾æ¥ï¼ˆé€šè¿‡ pnpm workspacesï¼‰

### 3. æ„å»ºé¡¹ç›®

```bash
# æ„å»ºæ‰€æœ‰åŒ…ï¼ˆé‡è¦ï¼šé¦–æ¬¡å¿…é¡»æ‰§è¡Œï¼‰
pnpm build > build.log 2>&1

# æ£€æŸ¥æ„å»ºæ˜¯å¦æˆåŠŸ
tail -n 20 build.log
```

**ä¸ºä»€ä¹ˆè¦é‡å®šå‘è¾“å‡ºï¼Ÿ**
- æ„å»ºè¾“å‡ºéå¸¸å¤šï¼Œç›´æ¥æ˜¾ç¤ºä¼šå¾ˆä¹±
- ä¿å­˜åˆ°æ–‡ä»¶ä¾¿äºæ£€æŸ¥é”™è¯¯

## å¯åŠ¨ n8n

### æ–¹å¼ 1: ç”Ÿäº§æ¨¡å¼å¯åŠ¨

```bash
pnpm start
```

è®¿é—®: http://localhost:5678

### æ–¹å¼ 2: å¼€å‘æ¨¡å¼å¯åŠ¨ï¼ˆæ¨èå¼€å‘æ—¶ä½¿ç”¨ï¼‰

```bash
# å¯åŠ¨æ‰€æœ‰åŒ…çš„å¼€å‘æ¨¡å¼ï¼ˆå¸¦çƒ­é‡è½½ï¼‰
pnpm dev
```

**å¼€å‘æ¨¡å¼ç‰¹ç‚¹**:
- âœ… è‡ªåŠ¨æ„å»ºä»£ç 
- âœ… ä»£ç å˜æ›´æ—¶è‡ªåŠ¨é‡å¯åç«¯
- âœ… ä»£ç å˜æ›´æ—¶è‡ªåŠ¨åˆ·æ–°å‰ç«¯
- âš ï¸ èµ„æºæ¶ˆè€—è¾ƒå¤§

### æ–¹å¼ 3: ä½¿ç”¨éš§é“å¯åŠ¨ï¼ˆç”¨äº Webhook æµ‹è¯•ï¼‰

```bash
./packages/cli/bin/n8n start --tunnel
```

è¿™ä¼šåˆ›å»ºä¸€ä¸ªå…¬ç½‘å¯è®¿é—®çš„ URLï¼Œç”¨äºæµ‹è¯• Webhookã€‚

## é€‰æ‹©æ€§å¼€å‘æ¨¡å¼ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰

å¦‚æœä½ çš„æœºå™¨æ€§èƒ½æœ‰é™ï¼Œå¯ä»¥åªè¿è¡Œéœ€è¦çš„åŒ…ï¼š

### ä»…åç«¯å¼€å‘
```bash
pnpm dev:be
```
æ’é™¤å‰ç«¯åŒ…ï¼ˆeditor-uiã€design-system ç­‰ï¼‰

### ä»…å‰ç«¯å¼€å‘
```bash
pnpm dev:fe
```
è¿è¡Œåç«¯æœåŠ¡å™¨ + å‰ç«¯å¼€å‘æœåŠ¡å™¨

### AI/LangChain èŠ‚ç‚¹å¼€å‘
```bash
pnpm dev:ai
```
åªè¿è¡Œ AI èŠ‚ç‚¹å¼€å‘æ‰€éœ€çš„åŒ…

### è‡ªå®šä¹‰èŠ‚ç‚¹å¼€å‘ï¼ˆå¸¦çƒ­é‡è½½ï¼‰
```bash
N8N_DEV_RELOAD=true pnpm dev
```

**æ€§èƒ½æç¤º**:
- `pnpm dev` ä¼šåŒæ—¶è¿è¡Œå¤šä¸ª TypeScript ç¼–è¯‘å™¨ã€æ–‡ä»¶ç›‘è§†å™¨ã€Nodemonã€Vite å¼€å‘æœåŠ¡å™¨
- åœ¨èµ„æºå—é™çš„æœºå™¨ä¸Šï¼Œä½¿ç”¨é€‰æ‹©æ€§å¼€å‘æ¨¡å¼å¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½
- æ–‡ä»¶ç›‘è§†åœ¨ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿæˆ–è™šæ‹Ÿæœºå…±äº«æ–‡ä»¶å¤¹ä¸Šæ€§èƒ½è¾ƒå·®

## å¼€å‘å·¥ä½œæµç¤ºä¾‹

### åœºæ™¯ 1: å‰ç«¯ UI å¼€å‘

```bash
# ç»ˆç«¯ 1: å¯åŠ¨åç«¯ï¼ˆæ— ç›‘è§†ï¼‰
pnpm start

# ç»ˆç«¯ 2: å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd packages/frontend/editor-ui
pnpm dev
```

### åœºæ™¯ 2: è‡ªå®šä¹‰èŠ‚ç‚¹å¼€å‘

```bash
# ç»ˆç«¯ 1: ç›‘è§†èŠ‚ç‚¹åŒ…
cd packages/nodes-base
pnpm watch

# ç»ˆç«¯ 2: è¿è¡Œ CLIï¼ˆå¸¦çƒ­é‡è½½ï¼‰
cd packages/cli
N8N_DEV_RELOAD=true pnpm dev
```

### åœºæ™¯ 3: å…¨æ ˆåŠŸèƒ½å¼€å‘

```bash
# ç›´æ¥è¿è¡Œå®Œæ•´å¼€å‘æ¨¡å¼
pnpm dev
```

## éªŒè¯å®‰è£…

å®‰è£…æˆåŠŸåï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š

1. âœ… è®¿é—® http://localhost:5678
2. âœ… çœ‹åˆ° n8n æ¬¢è¿é¡µé¢
3. âœ… åˆ›å»ºç¬¬ä¸€ä¸ªå·¥ä½œæµ
4. âœ… æ·»åŠ èŠ‚ç‚¹å¹¶é…ç½®

## å¸¸è§é—®é¢˜

### Q1: `pnpm: command not found`
**è§£å†³æ–¹æ¡ˆ**:
```bash
corepack enable
corepack prepare --activate
```

### Q2: æ„å»ºå¤±è´¥ï¼Œæç¤º Python æˆ–æ„å»ºå·¥å…·ç¼ºå¤±
**è§£å†³æ–¹æ¡ˆ**: å®‰è£…å¯¹åº”å¹³å°çš„æ„å»ºå·¥å…·ï¼ˆè§å‰ç½®è¦æ±‚ï¼‰

### Q3: ç«¯å£ 5678 å·²è¢«å ç”¨
**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :5678

# æ€æ­»è¿›ç¨‹
kill -9 <PID>
```

### Q4: `pnpm dev` è¿è¡Œéå¸¸æ…¢
**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨é€‰æ‹©æ€§å¼€å‘æ¨¡å¼ï¼Œå¦‚ `pnpm dev:be` æˆ– `pnpm dev:fe`

### Q5: ä¿®æ”¹ä»£ç åæ²¡æœ‰è‡ªåŠ¨é‡è½½
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥æ˜¯å¦åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿è¡Œï¼ˆ`pnpm dev`ï¼‰
- å¯¹äºèŠ‚ç‚¹å¼€å‘ï¼Œç¡®ä¿è®¾ç½®äº† `N8N_DEV_RELOAD=true`

## ä¸‹ä¸€æ­¥

ç°åœ¨ä½ å·²ç»æˆåŠŸå¯åŠ¨äº† n8nï¼Œå¯ä»¥ï¼š

1. ğŸ“– é˜…è¯» `03-å¼€å‘å·¥ä½œæµ.md` äº†è§£å¦‚ä½•å¼€å‘åŠŸèƒ½
2. ğŸ§ª é˜…è¯» `04-æµ‹è¯•æŒ‡å—.md` äº†è§£å¦‚ä½•è¿è¡Œæµ‹è¯•
3. ğŸ¨ æ¢ç´¢ `packages/frontend/editor-ui` äº†è§£å‰ç«¯ç»“æ„
4. âš™ï¸ æ¢ç´¢ `packages/cli` äº†è§£åç«¯ API
5. ğŸ”Œ åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªè‡ªå®šä¹‰èŠ‚ç‚¹

## æœ‰ç”¨çš„ VS Code æ‰©å±•

æ¨èå®‰è£…ä»¥ä¸‹æ‰©å±•æå‡å¼€å‘ä½“éªŒï¼š

- **ESLint** - ä»£ç æ£€æŸ¥
- **Volar** - Vue 3 æ”¯æŒ
- **TypeScript Vue Plugin (Volar)** - Vue TypeScript æ”¯æŒ
- **Prettier** - ä»£ç æ ¼å¼åŒ–
- **Code Spell Checker** - æ‹¼å†™æ£€æŸ¥
- **Coverage Gutters** - æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡
