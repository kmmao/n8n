# n8n 项目介绍

## 什么是 n8n？

n8n 是一个**工作流自动化平台**，为技术团队提供了代码的灵活性和无代码的速度。

### 核心特点

1. **代码与无代码结合**
   - 可视化界面搭建工作流
   - 需要时可以写 JavaScript/Python 代码
   - 支持添加 npm 包

2. **AI 原生平台**
   - 基于 LangChain 构建 AI 代理工作流
   - 支持自定义数据和模型

3. **完全控制**
   - 可自托管（fair-code 许可证）
   - 也可使用云服务：https://app.n8n.cloud/login

4. **企业级功能**
   - 高级权限控制
   - SSO 单点登录
   - 支持离线部署

5. **活跃社区**
   - 400+ 集成
   - 900+ 现成模板

## 技术栈

### 前端
- **框架**: Vue 3 + TypeScript
- **构建工具**: Vite
- **状态管理**: Pinia
- **UI 库**: 自建设计系统 (@n8n/design-system) + Storybook

### 后端
- **运行时**: Node.js (>=22.16)
- **框架**: Express
- **ORM**: TypeORM
- **数据库支持**: SQLite / PostgreSQL / MySQL

### 测试
- **单元测试**: Jest (后端) + Vitest (前端)
- **E2E 测试**: Playwright (正在从 Cypress 迁移)
- **HTTP Mock**: nock

### 代码质量
- **格式化**: Biome
- **代码检查**: ESLint
- **Git 钩子**: lefthook

### Monorepo 管理
- **包管理器**: pnpm (>=10.18.3)
- **工作空间**: pnpm workspaces
- **构建编排**: Turbo

## 项目架构

n8n 是一个 **monorepo**（单一代码仓库），所有模块都在一个仓库中：

```
n8n/
├── packages/
│   ├── @n8n/                    # 作用域包
│   │   ├── api-types/           # 前后端共享的 TypeScript 接口
│   │   ├── config/              # 集中配置管理
│   │   ├── di/                  # 依赖注入容器
│   │   ├── errors/              # 错误类
│   │   └── nodes-langchain/     # AI/LangChain 节点
│   │
│   ├── frontend/                # 前端相关包
│   │   ├── @n8n/
│   │   │   ├── design-system/  # Vue 组件库
│   │   │   ├── i18n/           # 国际化
│   │   │   ├── stores/         # Pinia 状态管理
│   │   │   ├── rest-api-client/ # API 客户端
│   │   │   └── composables/    # Vue 组合式函数
│   │   └── editor-ui/          # 主编辑器应用
│   │
│   ├── workflow/                # 核心工作流接口和类型
│   ├── core/                    # 工作流执行引擎
│   ├── cli/                     # Express 服务器、REST API、CLI 命令
│   └── nodes-base/              # 内置节点集成
│
├── docker/                      # Docker 镜像文件
└── cypress/                     # E2E 测试（正在迁移到 Playwright）
```

## 关键架构模式

### 1. 依赖注入 (DI)
- 使用 `@n8n/di` 包提供 IoC 容器
- 解耦组件依赖

### 2. Controller-Service-Repository 模式
- 后端遵循类 MVC 架构
- 控制器处理 HTTP 请求
- 服务层处理业务逻辑
- 仓库层处理数据访问

### 3. 事件驱动
- 内部事件总线实现解耦通信

### 4. 上下文执行
- 不同节点类型使用不同执行上下文

### 5. 设计系统
- 所有可复用 Vue 组件集中在 `@n8n/design-system`
- 使用设计令牌（CSS 变量）保持一致性

## 许可证

n8n 使用 **fair-code** 许可证：
- **源代码可见**: 代码始终可见
- **可自托管**: 可部署到任何地方
- **可扩展**: 可添加自定义节点和功能

主要许可证：
- [Sustainable Use License](https://github.com/n8n-io/n8n/blob/master/LICENSE.md)
- [n8n Enterprise License](https://github.com/n8n-io/n8n/blob/master/LICENSE_EE.md)

## 资源链接

- 📚 官方文档: https://docs.n8n.io
- 🔧 集成列表: https://n8n.io/integrations
- 💡 工作流模板: https://n8n.io/workflows
- 🤖 AI & LangChain 指南: https://docs.n8n.io/advanced-ai/
- 👥 社区论坛: https://community.n8n.io
- 📖 社区教程: https://community.n8n.io/c/tutorials/28
- 💼 招聘信息: https://n8n.io/careers

## n8n 名字的由来

**简短回答**: 代表 "nodemation"，发音为 n-eight-n。

**完整故事**:
创始人 Jan Oberhauser 在寻找项目名称时，发现所有好名字都被占用了。最终选择了 "nodemation"：
- "node-" 表示使用节点视图，基于 Node.js
- "-mation" 表示自动化（automation）

但这个名字太长，在 CLI 中输入不方便，所以简化为 "n8n"（n + 8个字母 + n）。
